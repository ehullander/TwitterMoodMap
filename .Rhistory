options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
df<-data.frame(DMA=as.numeric(row.names(df)),scores=round(as.numeric(df),2), sd=round(as.numeric(dt),2))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df),2, sd=as.numeric(dt),2)
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
df
tweets$scores<-vapply(tweets[,'V1'],sentiment, FUN.VALUE=integer(1))
tweets<-merge(statedata,tweets,by.x='CityState', by.y='V2')
DMAs<-unique(data.frame(Region=statedata$DMA.Region,DMA=as.numeric(statedata$DMA.Region.Code)))
tweets$ones<-1
df<-with(tweets, tapply(scores, DMA.Region.Code, mean, na.rm=TRUE, row.names=NULL, simplify=FALSE))
dt<-with(tweets, tapply(scores, DMA.Region.Code, sd, na.rm=TRUE,  simplify=FALSE))
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
View(tweets)
source('~/.active-rstudio-document')
df<-data.frame(DMA=as.numeric(row.names(df)),scores=round(as.numeric(df),2), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(round(df,2)), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
tweets$ones<-1
df<-with(tweets, tapply(scores, DMA.Region.Code, mean, na.rm=TRUE, row.names=NULL, simplify=FALSE))
dt<-with(tweets, tapply(scores, DMA.Region.Code, sd, na.rm=TRUE,  simplify=FALSE))
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
tweets$scores<-vapply(tweets[,'V1'],sentiment, FUN.VALUE=integer(1))
tweets<-merge(statedata,tweets,by.x='CityState', by.y='V2')
DMAs<-unique(data.frame(Region=statedata$DMA.Region,DMA=as.numeric(statedata$DMA.Region.Code)))
tweets$ones<-1
df<-with(tweets, vapply(scores, DMA.Region.Code, mean, FUN.VALUE=double(1), na.rm=TRUE, row.names=NULL, simplify=FALSE))
dt<-with(tweets, vapply(scores, DMA.Region.Code, sd, FUN.VALUE=double(1), na.rm=TRUE,  simplify=FALSE))
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
tweets$scores<-vapply(tweets[,'V1'],sentiment, FUN.VALUE=integer(1))
tweets<-merge(statedata,tweets,by.x='CityState', by.y='V2')
DMAs<-unique(data.frame(Region=statedata$DMA.Region,DMA=as.numeric(statedata$DMA.Region.Code)))
tweets$ones<-1
df<-with(tweets, tapply(scores, DMA.Region.Code, mean, na.rm=TRUE, row.names=NULL, simplify=FALSE))
dt<-with(tweets, tapply(scores, DMA.Region.Code, sd, na.rm=TRUE,  simplify=FALSE))
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
df
df$scores<-round(df$scores,2)
tweets$scores<-vapply(tweets[,'V1'],sentiment, FUN.VALUE=integer(1))
tweets<-merge(statedata,tweets,by.x='CityState', by.y='V2')
DMAs<-unique(data.frame(Region=statedata$DMA.Region,DMA=as.numeric(statedata$DMA.Region.Code)))
tweets$ones<-1
df<-with(tweets, tapply(scores, DMA.Region.Code, mean, na.rm=TRUE, row.names=NULL, simplify=FALSE))
dt<-with(tweets, tapply(scores, DMA.Region.Code, sd, na.rm=TRUE,  simplify=FALSE))
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
df$scores<-round(df$scores,2)
df$sd<-round(df$sd,2)
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
df<-with(tweets, tapply(scores, DMA.Region.Code, mean, na.rm=TRUE, row.names=NULL, simplify=FALSE))
dt<-with(tweets, tapply(scores, DMA.Region.Code, sd, na.rm=TRUE,  simplify=FALSE))
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
df$scores<-round(df$scores/max(df$scores),2)
df$sd<-round(df$sd/max(df$sd),2)
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
max(df$sd)
max(df$sd, na.rm=TRUE)
df$sd
tweets$scores<-vapply(tweets[,'V1'],sentiment, FUN.VALUE=integer(1))
tweets<-merge(statedata,tweets,by.x='CityState', by.y='V2')
DMAs<-unique(data.frame(Region=statedata$DMA.Region,DMA=as.numeric(statedata$DMA.Region.Code)))
tweets$ones<-1
df<-with(tweets, tapply(scores, DMA.Region.Code, mean, na.rm=TRUE, row.names=NULL, simplify=FALSE))
dt<-with(tweets, tapply(scores, DMA.Region.Code, sd, na.rm=TRUE,  simplify=FALSE))
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
df$scores<-round(df$scores/max(df$scores),2)
df$sd<-round(df$sd/max(df$sd),2)
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
tweets$scores<-vapply(tweets[,'V1'],sentiment, FUN.VALUE=integer(1))
tweets<-merge(statedata,tweets,by.x='CityState', by.y='V2')
DMAs<-unique(data.frame(Region=statedata$DMA.Region,DMA=as.numeric(statedata$DMA.Region.Code)))
tweets$ones<-1
df<-with(tweets, tapply(scores, DMA.Region.Code, mean, na.rm=TRUE, row.names=NULL, simplify=FALSE))
dt<-with(tweets, tapply(scores, DMA.Region.Code, sd, na.rm=TRUE,  simplify=FALSE))
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
max(df$sd)
max(df$sd, na.rm=TRUE)
df$scores<-round(df$scores/max(df$scores),2)
df$sd<-round(df$sd/max(df$sd, na.rm=TRUE),2)
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
tweets$scores<-vapply(tweets[,'V1'],sentiment, FUN.VALUE=integer(1))
tweets<-merge(statedata,tweets,by.x='CityState', by.y='V2')
DMAs<-unique(data.frame(Region=statedata$DMA.Region,DMA=as.numeric(statedata$DMA.Region.Code)))
tweets$ones<-1
df<-with(tweets, tapply(scores, DMA.Region.Code, mean, na.rm=TRUE, row.names=NULL, simplify=FALSE))
dt<-with(tweets, tapply(scores, DMA.Region.Code, sd, na.rm=TRUE,  simplify=FALSE))
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
df$scores<-round(df$scores/max(df$scores),2)
df$sd<-round(df$sd/max(df$scores, na.rm=TRUE),2)
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
tweets$scores<-vapply(tweets[,'V1'],sentiment, FUN.VALUE=integer(1))
tweets<-merge(statedata,tweets,by.x='CityState', by.y='V2')
DMAs<-unique(data.frame(Region=statedata$DMA.Region,DMA=as.numeric(statedata$DMA.Region.Code)))
tweets$ones<-1
df<-with(tweets, tapply(scores, DMA.Region.Code, mean, na.rm=TRUE, row.names=NULL, simplify=FALSE))
dt<-with(tweets, tapply(scores, DMA.Region.Code, sd, na.rm=TRUE,  simplify=FALSE))
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
df$scores<-round(df$scores/max(df$scores),2)
df$sd<-round(df$sd/max(df$scores),2)
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
tweets$scores<-vapply(tweets[,'V1'],sentiment, FUN.VALUE=integer(1))
tweets<-merge(statedata,tweets,by.x='CityState', by.y='V2')
DMAs<-unique(data.frame(Region=statedata$DMA.Region,DMA=as.numeric(statedata$DMA.Region.Code)))
tweets$ones<-1
df<-with(tweets, tapply(scores, DMA.Region.Code, mean, na.rm=TRUE, row.names=NULL, simplify=FALSE))
dt<-with(tweets, tapply(scores, DMA.Region.Code, sd, na.rm=TRUE,  simplify=FALSE))
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
df$scores<-round(df$scores,2)
df$sd<-round(df$sd/max(df$scores),2)
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
tweets$scores<-vapply(tweets[,'V1'],sentiment, FUN.VALUE=integer(1))
tweets<-merge(statedata,tweets,by.x='CityState', by.y='V2')
DMAs<-unique(data.frame(Region=statedata$DMA.Region,DMA=as.numeric(statedata$DMA.Region.Code)))
tweets$ones<-1
df<-with(tweets, tapply(scores, DMA.Region.Code, mean, na.rm=TRUE, row.names=NULL, simplify=FALSE))
dt<-with(tweets, tapply(scores, DMA.Region.Code, sd, na.rm=TRUE,  simplify=FALSE))
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
maxscore<-max(df$scores)
df$scores<-round(df$scores/maxscore,2)
df$sd<-round(df$sd/maxscore,2)
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "sd", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "sd",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
df$range<-c(df$Region, "∓", df$sd)
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
tweets$ones<-1
df<-with(tweets, tapply(scores, DMA.Region.Code, mean, na.rm=TRUE, row.names=NULL, simplify=FALSE))
dt<-with(tweets, tapply(scores, DMA.Region.Code, sd, na.rm=TRUE,  simplify=FALSE))
dx<-with(tweets, tapply(ones, DMA.Region.Code, sum, na.rm=TRUE,  simplify=FALSE))
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt), count=as.numeric(dx))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
maxscore<-max(df$scores)
df$scores<-round(df$scores/maxscore,2)
df$sd<-round(df$sd/maxscore,2)
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "count", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
tweets$ones<-1
df<-with(tweets, tapply(scores, DMA.Region.Code, mean, na.rm=TRUE, row.names=NULL, simplify=FALSE))
dt<-with(tweets, tapply(scores, DMA.Region.Code, sd, na.rm=TRUE,  simplify=FALSE))
dx<-with(tweets, tapply(ones, DMA.Region.Code, sum, na.rm=TRUE,  simplify=FALSE))
df<-data.frame(DMA=as.numeric(row.names(df)),scores=as.numeric(df), sd=as.numeric(dt), count=as.numeric(dx))
df<-merge(df,DMAs,by.x='DMA',by.y='DMA')
maxscore<-max(df$scores)
df$scores<-round(df$scores/maxscore,2)
df$sd<-round(df$sd/maxscore,2)
#df<-rbind(c(1000,-3),df)
#df<-rbind(c(1000,3),df)
df<-cbind(df,date)
write.table(df,"tweetscores.csv", append=TRUE, sep=",", col.names=NA)
#Google Intensity plot
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "count", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
df <- read.csv("tweetscores.csv", colClasses = "character")
df$date<-factor(df$date)
dates<-unique(df$date)
dates
dates[1]
dates<-unique(as.character((df$date))
dates<-unique(as.character(df$date))
dates
df$x[1]
df<-df[!is.null(df$x),]
df$date<-factor(df$date)
dates<-unique(as.character(df$date))
dates
df <- read.csv("tweetscores.csv", colClasses = "character")
df<-df[!is.null(df$x),]
df <- read.csv("tweetscores.csv", colClasses = "character")
df$x
df$X
df$X==""
df$X!=""
df<-df[df$X!="",]
df$date<-factor(df$date)
df$date<-factor(df$date)
dates<-unique(as.character(df$date))
?subset
dates[1]
DF <- read.csv("tweetscores.csv", colClasses = "character")
DF<-DF[df$X!="",]
DF$date<-factor(DF$date)
dates<-unique(as.character(DF$date))
dates
df<-subset(DF,dates[1])
df<-subset(DF,date==dates[1])
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
Intensity2 <- gvisGeoChart(df, "DMA", "count", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
require("googleVis")
DF <- read.csv("tweetscores.csv", colClasses = "character")
DF<-DF[DF$X!="",]
DF$date<-factor(DF$date)
dates<-unique(as.character(DF$date))
length(dates)
for (n in 1:length(dates))
{
dates[n]
df<-subset(DF,date==dates[n])
#Google Intensity plot
```
Mood Date
```{r ComboExample1, results='asis', tidy=FALSE, echo=FALSE}
Intensity1 <- gvisGeoChart(df, "DMA", "scores", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#0033CC','#999999','#FFFF00']"))
plot(Intensity1)
```
####Mood Map
#####Blue=sad
#####Yellow=Happy
```{r ComboExample2, results='asis', tidy=FALSE, echo=FALSE}
Intensity2 <- gvisGeoChart(df, "DMA", "count", hovervar = "Region",
options=list(region="US", displayMode="regions",
resolution="metros", colors="['#FFFFFF','#000000']"))
plot(Intensity2)
```
####Tweet Density
#####Black=More Tweets
#####White=Less Tweets
}
DF <- read.csv("tweetscores.csv", colClasses = "character")
DF<-DF[DF$X!="",]
DF$date<-factor(DF$date)
dates<-unique(as.character(DF$date))
dates
weekdays(as.Date(dates[n],'%y-%m-%d'))
weekdays(as.Date(dates[1],'%y-%m-%d'))
weekdays(as.Date(dates[1],'%y-%m-%d h:m:s'))
?weekdays
weekdays(as.Date(dates[1]))
